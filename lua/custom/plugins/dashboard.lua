-- This config is adapted from LazyVim's dashboard-nvim config and uwuified :3
-- Credit to hyyperb on Discord for the concept and logo text
return {
  'nvimdev/dashboard-nvim',
  lazy = false, -- As https://github.com/nvimdev/dashboard-nvim/pull/450, dashboard-nvim shouldn't be lazy-loaded to properly handle stdin.
  enabled = function()
    return vim.fn.environ()['NYAA_VIM'] ~= nil
  end,
  opts = function()
    local logo = [[
      ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£Ä‚£§‚°§‚£∂‚°§‚£§‚†Ä‚†Ä       
      ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚£Ä‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚£†‚†∂‚†õ‚¢â‚°º‚†õ‚†Å‚£†‚°ü‚†Ä‚†Ä       
      ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£†‚°§‚†ñ‚†õ‚†â‚†â‚†Ω‚†ì‚†í‚†ì‚†í‚†ø‚†â‚†õ‚†í‚†¶‚£§‚°Ä‚†Ä‚£†‚°∂‚†ã‚†Å‚†Ä‚¢†‚°ü‚†Ä‚†Ä‚†¥‚†ü‚†õ‚¢≥‚°Ü       
      ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚£†‚°§‚£∂‚°∂‚†õ‚†Å‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†â‚†ª‚¢Ø‚°Ä‚†Ä‚†Ä‚¢Ä‚°è‚°Ü‚†Ä‚†Ä‚†Ä‚¢Ä‚£º‚£ã‚°Ö       
      ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚£†‚†¥‚†ö‚†â‚£†‚†û‚†Å‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†â‚†≤‚£Ñ‚£∏‚†Å‚†Ä‚†Ä‚†Ä‚†Ä‚†â‚†Ä‚£∏‚°á       
      ‚†Ä‚†Ä‚†Ä‚†Ä‚£Ä‚£†‚†¥‚†û‚†ã‚†Ä‚£Ä‚°¥‚†ü‚†Å‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†à‚†ª‚£¶‚£Ñ‚†Ä‚†Ä‚†Ä‚¢Ä‚£¥‚†è‚†Ä       
      ‚£§‚°¥‚†í‚†õ‚†â‚†Ä‚†Ä‚†ê‚†í‚†õ‚£∑‚†û‚†Å‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£†‚†è‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢≥‚£å‚£õ‚£í‚£§‚†ø‚†ü‚£∂‚†Ü       
      ‚¢π‚£ß‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£º‚¢°‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£∞‚†è‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£§‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢π‚°Ñ‚†â‚†Ä‚†Ä‚£∞‚†è‚†Ä       
      ‚†Ä‚¢ø‚°∑‚£Ñ‚†Ä‚†Ä‚†Ä‚†Ä‚¢∞‚°∑‚†ã‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£†‚†è‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†∏‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£ø‚†Ä‚†â‚†õ‚£Ø‚†Ä‚†Ä       
      ‚†Ä‚†à‚¢∑‚£à‚†ô‚¢∂‚£í‚†õ‚†ã‚¢†‚†û‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚°¥‚†Ä‚¢†‚°è‚¢Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚°á‚†Ä‚†Ä‚†Ä‚†Ä‚£á‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£ø‚°¶‚£¥‚†ü‚†Å‚†Ä‚†Ä       
      ‚†Ä‚†Ä‚†Ä‚¢π‚°ü‚†Ç‚†©‚†õ‚¢≤‚°è‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢∞‚°á‚£Ä‚£ø‚†Ä‚¢∏‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚°Ñ‚†Ä‚†ê‚¢∫‚¢∑‚†Ç‚†∞‚°Ñ‚†Ä‚¢∏‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†π‚£ü‚°Å‚†Ä‚†Ä‚†Ä‚†Ä       
      ‚†Ä‚†Ä‚†Ä‚†à‚†õ‚†≤‚¢∂‚†Ä‚°æ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢†‚¢∏‚°∑‚†´‚¢∏‚°Ü‚¢∏‚£Ü‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢≥‚†Ä‚¢Ä‚°ø‚†ò‚¢ß‚°Ä‚¢π‚£Ñ‚†Ä‚£ß‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†à‚†ô‚†≤‚¢§‚£§‚°Ü       
      ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†à‚¢π‚†Å‚¢∞‚†Ä‚†Ä‚†Ä‚†Ä‚¢∏‚¢∏‚°Ö‚†Ä‚†Ä‚†ª‚£é‚£ø‚¢¶‚£Ä‚†Ä‚†Ä‚†Ä‚£∏‚°Ä‚£º‚£∑‚£æ‚£ø‚£ø‚£æ‚£ø‚¢¶‚£ø‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢∑‚†¶‚†¥‚†ñ‚†ã‚†Å       
      ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢∏‚†Ä‚¢∏‚°Ñ‚†Ä‚†Ä‚†Ä‚£ø‚†∏‚£á‚†Ä‚†Ä‚†Ä‚†à‚†ô‚†Ç‚†ô‚†∑‚£Ñ‚£Ä‚£ø‚†ü‚¢ø‚£ø‚°è‚£Ä‚°Ä‚¢ô‚£ø‚£ø‚£è‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢∏‚°Ä‚†∏‚°Ü‚†Ä‚†Ä‚†Ä‚†Ä       
      ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢∏‚°Ä‚†Ä‚£ø‚°Ä‚†Ä‚†Ä‚¢∏‚°∑‚¢ø‚£∂‚£∂‚£¶‚£ç‚°¢‚†Ä‚†Ä‚†Ä‚†Ä‚†ô‚†Ä‚†Ä‚¢∏‚£ü‚†â‚†Ω‚†ø‚†ç‚£ª‚£ø‚†ü‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£∏‚†Å‚¢∞‚†á‚†Ä‚†Ä‚†Ä‚†Ä       
      ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†ª‚£Ñ‚£ß‚°ø‚¢¶‚£Ñ‚°Ä‚£∑‚†Ä‚†Ä‚†à‚†â‚†õ‚†ª‚¢¶‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚††‚†ø‚†§‚†§‚†§‚¢í‚°ø‚†É‚£†‚°û‚†Ä‚†Ä‚†Ä‚£†‚°è‚¢Ä‚°û‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä       
      ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚£¨‚†ü‚†Å‚†Ä‚†â‚¢â‚¢ª‚°á‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢¥‚°Ø‚†¥‚£∫‚£ø‚†Ä‚†Ä‚¢Ä‚°¥‚£ø‚°ñ‚†ã‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä       
      ‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚£†‚°§‚†∂‚†ã‚†Å‚†Ä‚†Ä‚†Ä‚¢Ä‚°Ñ‚†à‚¢≥‚£Ñ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚††‚£Ñ‚£†‚£§‚£Ä‚°Ñ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚°¥‚†ã‚£Ø‚£§‚†ñ‚†ã‚†Ä‚¢∏‚°á‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä       
      ‚†Ä‚£†‚°∂‚†ö‚†â‚¢Å‚°Ü‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚°û‚†Ä‚†Ä‚†Ä‚†à‚†ì‚£∂‚£Ñ‚£Ä‚†Ä‚†Ä‚†à‚†â‚†â‚†Å‚†Ä‚†Ä‚†Ä‚£Ä‚°§‚†û‚†ã‚†Ä‚†Ä‚†Ä‚°Ä‚†Ä‚†Ä‚†Ä‚†∏‚£∑‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä       
      ‚¢∏‚†ü‚†Ä‚†Ä‚£¥‚°ü‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚°º‚†Ä‚†Ä‚†Ä‚†Ä‚£¥‚£ø‚£ø‚£§‚°â‚†õ‚¢ø‚°ñ‚†¶‚†§‚†§‚†ñ‚¢õ‚£ø‚†ã‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢≥‚†Ä‚†Ä‚†Ä‚†Ä‚†π‚£∑‚£Ñ‚°Ä‚†Ä‚¢Ä‚°Ä‚†Ä       
      ‚¢∏‚†Ä‚†Ä‚¢∏‚°ø‚†Å‚¢†‚°Ñ‚†Ä‚†Ä‚†Ä‚†Ä‚°á‚†Ä‚†Ä‚¢Ä‚°º‚†õ‚†ª‚£ø‚£Æ‚£ô‚£¶‚°à‚£ø‚£Ü‚†Ä‚†Ä‚¢Ä‚°æ‚†õ‚¢∑‚£§‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢∏‚†Ä‚†Ä‚†Ä‚¢∞‚°Ñ‚†ô‚£Æ‚°â‚†â‚†â‚†Å‚†Ä       
      ‚†ò‚£ß‚†Ä‚°è‚°á‚†Ä‚†∏‚°á‚†Ä‚†Ä‚†Ä‚†Ä‚¢ª‚†Ä‚¢Ä‚°è‚†Ä‚†Ä‚†Ä‚†ò‚£ø‚£ø‚£ø‚£∑‚£Ω‚£ø‚£¶‚£§‚£º‚°á‚¢Ä‚°ø‚¢∏‚†ø‚£Ü‚†Ä‚†Ä‚†Ä‚†à‚£ß‚†Ä‚†Ä‚†Ä‚¢≥‚°Ñ‚†à‚†ª‚£Ü‚†Ä‚†Ä‚†Ä       
      ‚†Ä‚†à‚¢∑‚£á‚£ß‚°Ä‚†Ä‚¢π‚£Ñ‚†Ä‚†Ä‚†Ä‚†à‚£á‚¢∏‚†Å‚†Ä‚†Ä‚†Ä‚†Ä‚†®‚£ø‚£ø‚£ø‚£ø‚£Ü‚¢π‚£Ü‚£∏‚¢°‚£ø‚£∑‚°ü‚£†‚£ø‚°Ä‚†Ä‚†Ä‚†Ä‚£ø‚†Ä‚†Ä‚†Ä‚†Ä‚£ø‚¢Ü‚†Ä‚†ò‚¢∑‚°Ä‚†Ä       
                                                                
  ‚ñà‚ñà‚ñà‚ïó   ‚ñà‚ñà‚ïó‚ñà‚ñà‚ïó   ‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó    ‚ñà‚ñà‚ïó   ‚ñà‚ñà‚ïó‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ïó   ‚ñà‚ñà‚ñà‚ïó 
  ‚ñà‚ñà‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó   ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ïë 
  ‚ñà‚ñà‚ïî‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïë ‚ïö‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ñà‚ñà‚ñà‚ñà‚ïî‚ñà‚ñà‚ïë 
  ‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë  ‚ïö‚ñà‚ñà‚ïî‚ïù  ‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïë   ‚ïö‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë 
  ‚ñà‚ñà‚ïë ‚ïö‚ñà‚ñà‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë    ‚ïö‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë ‚ïö‚ïê‚ïù ‚ñà‚ñà‚ïë 
  ‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïê‚ïê‚ïù   ‚ïö‚ïê‚ïù   ‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù     ‚ïö‚ïê‚ïê‚ïê‚ïù  ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù     ‚ïö‚ïê‚ïù 
    ]]

    logo = '\n\n' .. logo .. '\n\n'

    local opts = {
      theme = 'doom',
      hide = {
        -- this is taken care of by lualine
        -- enabling this messes up the actual laststatus setting after loading a file
        statusline = false,
      },
      config = {
        header = vim.split(logo, '\n'),
        -- stylua: ignore
        center = {
          { action = 'ene | startinsert',                                                             desc = ' New File',     icon = 'ÔÖõ ', key = 'n' },
          { action = 'Telescope oldfiles',                                                            desc = ' Recent Files', icon = 'ÔÉÖ ', key = 'r' },
          { action = 'Telescope recent-files',                                                        desc = ' Find File',    icon = 'ÔÄÇ ', key = 'f' },
          { action = 'Telescope live_grep',                                                           desc = ' Find Text',    icon = 'ÔÄ¢ ', key = 'g' },
          { action = 'lua require("telescope.builtin").find_files { cwd = vim.fn.stdpath "config" }', desc = ' Config',       icon = 'Ôê£ ', key = 'c' },
          { action = function() vim.api.nvim_input('<cmd>qa<cr>') end,                                desc = ' Quit',         icon = 'Ôê¶ ', key = 'q' },
        },
        footer = function()
          local stats = require('lazy').stats()
          local ms = (math.floor(stats.startuptime * 100 + 0.5) / 100)
          return { 'üê± Nyaa-vim loaded ' .. stats.loaded .. '/' .. stats.count .. ' plugins in ' .. ms .. 'ms' }
        end,
      },
    }

    for _, button in ipairs(opts.config.center) do
      button.desc = button.desc .. string.rep(' ', 43 - #button.desc)
      button.key_format = '  %s'
    end

    -- open dashboard after closing lazy
    if vim.o.filetype == 'lazy' then
      vim.api.nvim_create_autocmd('WinClosed', {
        pattern = tostring(vim.api.nvim_get_current_win()),
        once = true,
        callback = function()
          vim.schedule(function()
            vim.api.nvim_exec_autocmds('UIEnter', { group = 'dashboard' })
          end)
        end,
      })
    end

    return opts
  end,
}
